<!DOCTYPE html>
<html lang="zh-CN">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>è¯­éŸ³é‡‘ä¹¦ - ä¹¦åº“</title>
<style>
body {
  margin: 0;
  font-family: system-ui, sans-serif;
  background: linear-gradient(135deg, #1a1a2e, #533483);
  color: #fff;
  text-align: center;
  padding: 20px;
}
h1 {
  font-size: 2.2rem;
  margin-bottom: 20px;
  background: linear-gradient(to right, #41D1FF, #FFEA83, #BD34FE);
  -webkit-background-clip: text;
  -webkit-text-fill-color: transparent;
}
.book {
  background: rgba(255,255,255,0.1);
  margin: 12px auto;
  padding: 16px;
  border-radius: 12px;
  width: 90%;
  max-width: 400px;
  cursor: pointer;
  transition: transform 0.2s, border 0.2s;
}
.book:hover {
  transform: scale(1.03);
  border: 2px solid #FFD700;
}
.btns {
  margin-top: 10px;
}
button {
  margin: 4px;
  padding: 8px 14px;
  border: none;
  border-radius: 6px;
  font-size: 14px;
  cursor: pointer;
  transition: 0.3s;
}
.read-btn {
  background: #4CAF50;
  color: white;
}
.read-btn:hover { background: #45a049; }
.audio-btn {
  background: #2196F3;
  color: white;
}
.audio-btn:hover { background: #1976D2; }
</style>
</head>
<body>
  <!-- è¿”å›æŒ‰é’® -->
<button class="back-btn" onclick="goBack()">â¬… è¿”å›</button>

<script>
function goBack() {
if (document.referrer && document.referrer !== window.location.href) {
// æœ‰æ¥æºé¡µé¢ â†’ è¿”å›ä¸Šä¸€é¡µ
history.back();
} else {
// æ²¡æœ‰æ¥æºï¼ˆä¾‹å¦‚ç›´æ¥æ‰“å¼€é¡µé¢ï¼‰â†’ å›åˆ°é¦–é¡µ
window.location.href = "home.html";
// æŠŠ "home.html" æ”¹æˆä½ è‡ªå·±çš„é¦–é¡µè·¯å¾„
}
}
</script>

<style>
.back-btn {
position: fixed;
top: 15px;
left: 15px;
background: #2196F3;
color: white;
border: none;
padding: 10px 16px;
font-size: 16px;
border-radius: 8px;
cursor: pointer;
z-index: 9999;
box-shadow: 0 2px 6px rgba(0,0,0,0.3);
}
.back-btn:hover {
background: #1976D2;
}
</style>

<h1>ğŸ“š è¯­éŸ³é‡‘ä¹¦ - ä¹¦åº“</h1>
<div id="book-list"></div>

<script>
// ========== ğŸ“Œ ä¹¦ç±åˆ—è¡¨ï¼ˆåœ¨è¿™é‡Œæ·»åŠ æ–°çš„ä¹¦ç±ï¼‰ ==========
// å¦‚æœè¦å¢åŠ  book4ï¼Œå°±åœ¨ä¸‹é¢æ•°ç»„ä¸­åŠ ä¸€è¡Œ { file: "assets/book4.json" }
const books = [
  { file: "assets/book1.json" },
  { file: "assets/book2.json" },
  { file: "assets/book3.json" } // âœ… ç¬¬ä¸‰æœ¬ä¹¦
];

// åŠ¨æ€åŠ è½½ JSON æ–‡ä»¶å¹¶æ˜¾ç¤º
const container = document.getElementById("book-list");

books.forEach(b => {
  fetch(b.file)
    .then(res => res.json())
    .then(data => {
      const div = document.createElement("div");
      div.className = "book";

      // æ˜¾ç¤ºä¹¦ç±æ ‡é¢˜ + æè¿°
      div.innerHTML = `
        <h2>${data.title}</h2>
        <p>${data.desc || "ğŸ“– ç‚¹å‡»ä¸‹æ–¹æŒ‰é’®é˜…è¯»/å¬ä¹¦"}</p>
        <div class="btns">
          <button class="read-btn" onclick="openReader('${b.file}')">ğŸ“– é˜…è¯»</button>
          <button class="audio-btn" onclick="openAudio('${b.file}')">â© å¬ä¹¦åŠ é€Ÿ</button>
        </div>
      `;
      container.appendChild(div);
    })
    .catch(err => console.error("åŠ è½½å¤±è´¥:", err));
});

// ğŸ“– é˜…è¯»æ¨¡å¼ â†’ è·³åˆ° reader.html
function openReader(file) {
  window.location.href = "reader.html?file=" + file;
}

// ğŸ§ å¬ä¹¦æ¨¡å¼ â†’ è·³åˆ° audiobook.html
// åœ¨ audiobook.html é‡Œè¦å®ç°â€œåŠ é€Ÿæ’­æ”¾â€åŠŸèƒ½
function openAudio(file) {
  window.location.href = "audiobook.html?file=" + file + "&speed=1.5"; 
  // é»˜è®¤ 1.5 å€é€Ÿ
}
</script>

</body>
</html>
